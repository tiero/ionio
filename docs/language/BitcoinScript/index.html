<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Bitcoin Script | Ionio Language</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ionio-lang.org/docs/language/BitcoinScript"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Bitcoin Script | Ionio Language"><meta data-react-helmet="true" name="description" content="Ivy is designed to make it easier to create smart contracts for the Bitcoin network. Bitcoin&#x27;s protocol works very differently from other blockchain protocols that support smart contracts, such as Ethereum, and the types of contracts that are supported are more limited. Despite those limitations, Bitcoin smart contracts have proven to be surprisingly flexible, supporting applications such as payment channels, cross-chain atomic trades, and more. Future protocol upgradesâ€”and improvements in toolingâ€”may make it possible to build increasingly sophisticated applications on top of Bitcoin."><meta data-react-helmet="true" property="og:description" content="Ivy is designed to make it easier to create smart contracts for the Bitcoin network. Bitcoin&#x27;s protocol works very differently from other blockchain protocols that support smart contracts, such as Ethereum, and the types of contracts that are supported are more limited. Despite those limitations, Bitcoin smart contracts have proven to be surprisingly flexible, supporting applications such as payment channels, cross-chain atomic trades, and more. Future protocol upgradesâ€”and improvements in toolingâ€”may make it possible to build increasingly sophisticated applications on top of Bitcoin."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ionio-lang.org/docs/language/BitcoinScript"><link data-react-helmet="true" rel="alternate" href="https://ionio-lang.org/docs/language/BitcoinScript" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ionio-lang.org/docs/language/BitcoinScript" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.866f7346.css">
<link rel="preload" href="/assets/js/runtime~main.5dbe621d.js" as="script">
<link rel="preload" href="/assets/js/main.877ca005.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Ionio Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Ionio Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Ionio Language</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ionio-lang/ionio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Ivy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/docs/language/">Language</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/language/BitcoinScript">Bitcoin Script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/language/ExampleContracts">Example Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/language/Functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/language/IvySyntax">Ivy Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/language/Types">Types</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/docs/playground/">Playground</a><button aria-label="Toggle the collapsible sidebar category &#x27;Playground&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Bitcoin Script</h1></header><p>Ivy is designed to make it easier to create smart contracts for the Bitcoin network. Bitcoin&#x27;s protocol works very differently from other blockchain protocols that support smart contracts, such as Ethereum, and the types of contracts that are supported are more limited. Despite those limitations, Bitcoin smart contracts have proven to be surprisingly flexible, supporting applications such as payment channels, cross-chain atomic trades, and more. Future protocol upgradesâ€”and improvements in toolingâ€”may make it possible to build increasingly sophisticated applications on top of Bitcoin.</p><p>The below sections provide some background on how Bitcoin transactions, addresses, and scripting work, glossing over some important details. If you would like to learn about these topics, you can check out <a href="https://github.com/bitcoinbook/bitcoinbook" target="_blank" rel="noopener noreferrer">Mastering Bitcoin</a>, by Andreas Antonopoulos.</p><p>These explanations also assume that you are familiar with the basic concept of a distributed ledger, as well as digital signatures and hash functions. For more background on those concepts, you can check out <a href="https://blog.chain.com/behind-the-magic-of-the-blockchain-48f1cb35f1dc" target="_blank" rel="noopener noreferrer">this introductory post</a> from the Chain blog.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bitcoin-contracts">Bitcoin contracts<a class="hash-link" href="#bitcoin-contracts" title="Direct link to heading">â€‹</a></h2><p>The primary responsibility of the Bitcoin network is to maintain a distributed ledger, meaning information about who controls each of the over 16 million (at the time of this writing) Bitcoins in existence.</p><p>You can think of the current state of the ledger as a set of lockboxes, each of which stores some value (i.e., 1000 BTC, 5 BTC, or .001 BTC) and is controlled by some <a href="#bitcoin-addresses"><em>address</em></a> (i.e., 1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa).</p><p>In the Bitcoin context, these lockboxes are usually referred to as &quot;unspent transaction outputs.&quot; In Ivy, we call them <em>contracts</em>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bitcoin-transactions">Bitcoin transactions<a class="hash-link" href="#bitcoin-transactions" title="Direct link to heading">â€‹</a></h2><p>Each Bitcoin transaction unlocks value from some set of contracts (or creates new value from thin air, in the case of a <a href="https://bitcoin.org/en/glossary/coinbase-transaction" target="_blank" rel="noopener noreferrer">coinbase transaction</a>), and locks that value into newly created contracts. The old contracts, once unlocked, are removed from the ledger state; there is no way to withdraw only part of the value from a contract, or change a contract&#x27;s state. In other words, in Bitcoin, contracts are <em>immutable</em>.</p><p>A transaction contains a list of <em>inputs</em>â€”the unspent contracts that the transaction wants to unlockâ€”and a list of <em>outputs</em>â€”the new contracts that the contract wants to create. The amount of value unlocked in the inputs must be equal to the amount of value locked in the outputs.</p><p>For more on Bitcoin transactions, you can check out Chapter 6 of Mastering Bitcoin, <a href="https://github.com/bitcoinbook/bitcoinbook/blob/second_edition/ch06.asciidoc" target="_blank" rel="noopener noreferrer">Transactions</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bitcoin-addresses">Bitcoin addresses<a class="hash-link" href="#bitcoin-addresses" title="Direct link to heading">â€‹</a></h2><p>Bitcoin wouldn&#x27;t provide much security if anyone were able to unlock any contract. Contracts can only be unlocked under certain conditions, specified in that contract&#x27;s <em>address</em>. For example, an address can specify that the contract can only be unlocked using a digital signature from the contract&#x27;s owner (or more specifically, by the private key corresponding to a prespecified public key).</p><p>Each Bitcoin address corresponds to a program.<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> When you send Bitcoin to an address, you are creating a contract which locks that Bitcoin up with that address&#x27;s program. The only way to spend that Bitcoin is to satisfy the program, thus unlocking the value and allowing it to be sent to a new address. </p><p>When spending a contract, the user provides some arguments to satisfy the contract&#x27;s program. For example, the arguments might include one or more signatures, or the preimage of a particular hash. In Ivy, these arguments are referred to as <em>clause arguments</em>, since they are provided at the time that a particular clause of the contract is invoked.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bitcoin-script-1">Bitcoin Script<a class="hash-link" href="#bitcoin-script-1" title="Direct link to heading">â€‹</a></h2><p>Bitcoin Script is the low-level language that contracts&#x27; programs are written in. It consists of a sequence of opcodes, which are executed in order by a stack-based virtual machine (after the provided clause arguments are first placed on the stack).</p><p>Bitcoin Script is a relatively simple language, with support for cryptographic and hash operations, as well as conditionals. It is not Turing-complete (since it has no support for looping or recursion). It also does not allow scripts to inspect other inputs or outputs in the transaction, meaning the contract cannot control the flow of value or maintain any kind of persistent state.<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></p><p>Developers already use Bitcoin Script to create multisignature Bitcoin addresses and time-locked transactions, as well as more complex protocols like payment channels and cross-chain atomic trades. But reading and writing programs using Bitcoin Script is difficult, as is using it to create addresses and transactions. The goal of Ivy is to make it easier to write and instantiate these programs.</p><p>For more on Bitcoin Script, you can check out the <a href="https://en.bitcoin.it/wiki/Script" target="_blank" rel="noopener noreferrer">Bitcoin Wiki</a> as well as Chapter 7 of Mastering Bitcoin, <a href="https://github.com/bitcoinbook/bitcoinbook/blob/second_edition/ch07.asciidoc" target="_blank" rel="noopener noreferrer">Advanced Transactions and Scripting</a></p><div class="footnotes"><hr><ol><li id="fn-1">Conversion between Bitcoin Script programs and Bitcoin addresses involves some technical details that are beyond the scope of this documentation. The Ivy compiler creates <em>Segregated Witness</em> (SegWit) addresses, a new kind of Bitcoin address that has been supported since a protocol upgrade in August 2017. To create a SegWit address, the bytecode of the programâ€”the &quot;witness script&quot;â€”is hashed to create a &quot;redeem script,&quot; which is in turn hashed to create the address. To spend from a SegWit address, both the redeem script and the witness script are revealed, and arguments are provided to satisfy the witness script. For more on how SegWit addresses and scripts work, see the <a href="https://bitcoincore.org/en/segwit_wallet_dev/" target="_blank" rel="noopener noreferrer">Segregated Witness Wallet Development Guide</a> from Bitcoin Core.<a href="#fnref-1" class="footnote-backref">â†©</a></li><li id="fn-2">The inability to directly control value is a major difference when compiling Ivy to Bitcoin rather than using the version of <a href="https://www.chain.com/ivy" target="_blank" rel="noopener noreferrer">Ivy</a> designed to write smart contracts for Chain Core. There have been several proposals to add this kind of functionality to Bitcoin Script, most notably in <a href="http://fc16.ifca.ai/bitcoin/papers/MES16.pdf" target="_blank" rel="noopener noreferrer">Bitcoin Covenants</a>, by Malte MÃ¶ser, Ittay Eyal, and Emin GÃ¼n Sirer.<a href="#fnref-2" class="footnote-backref">â†©</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ionio-lang/ionio/tree/main/website/docs/language/BitcoinScript.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/language/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ivy Language</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/language/ExampleContracts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Example Contracts</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bitcoin-contracts" class="table-of-contents__link toc-highlight">Bitcoin contracts</a></li><li><a href="#bitcoin-transactions" class="table-of-contents__link toc-highlight">Bitcoin transactions</a></li><li><a href="#bitcoin-addresses" class="table-of-contents__link toc-highlight">Bitcoin addresses</a></li><li><a href="#bitcoin-script-1" class="table-of-contents__link toc-highlight">Bitcoin Script</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/ionio-lang" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/ionio-lang" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ionio-lang/ionio" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Vulpem Ventures OU. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5dbe621d.js"></script>
<script src="/assets/js/main.877ca005.js"></script>
</body>
</html>